{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/davidmatochoya/Desktop/david-final-project/client/src/components/Login/LoginScreen.tsx\";\nimport * as React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport * as Google from 'expo-google-app-auth';\nimport * as firebase from 'firebase/app';\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\nexport default function LoginScreen() {\n  function onSignIn(googleUser) {\n    console.log('Google Auth Response', googleUser);\n    var unsubscribe = firebase.auth().onAuthStateChanged(function (firebaseUser) {\n      unsubscribe();\n\n      if (!isUserEqual(googleUser, firebaseUser)) {\n        var credential = firebase.auth.GoogleAuthProvider.credential(googleUser.getAuthResponse().id_token);\n        firebase.auth().signInWithCredential(credential).catch(function (error) {\n          var errorCode = error.code;\n          var errorMessage = error.message;\n          var email = error.email;\n          var credential = error.credential;\n        });\n      } else {\n        console.log('User already signed-in Firebase.');\n      }\n    });\n  }\n\n  var signInWithGoogleAsync = function signInWithGoogleAsync() {\n    var result;\n    return _regeneratorRuntime.async(function signInWithGoogleAsync$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(Google.logInAsync({\n              androidClientId: '489999849555-5do62o44r40gggb0opk8gb2ltrtmtbm9.apps.googleusercontent.com',\n              scopes: ['profile', 'email']\n            }));\n\n          case 3:\n            result = _context.sent;\n\n            if (!(result.type === 'success')) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", result.accessToken);\n\n          case 6:\n            return _context.abrupt(\"return\", {\n              cancelled: true\n            });\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n            console.log('entro2');\n            return _context.abrupt(\"return\", {\n              error: true\n            });\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, React.createElement(Button, {\n    title: \"Sign in with Google\",\n    onPress: function onPress() {\n      return signInWithGoogleAsync();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/davidmatochoya/Desktop/david-final-project/client/src/components/Login/LoginScreen.tsx"],"names":["React","Google","firebase","styles","StyleSheet","create","container","flex","alignItems","justifyContent","LoginScreen","onSignIn","googleUser","console","log","unsubscribe","auth","onAuthStateChanged","firebaseUser","isUserEqual","credential","GoogleAuthProvider","getAuthResponse","id_token","signInWithCredential","catch","error","errorCode","code","errorMessage","message","email","signInWithGoogleAsync","logInAsync","androidClientId","scopes","result","type","accessToken","cancelled"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;;;AAEA,OAAO,KAAKC,MAAZ,MAAwB,sBAAxB;AACA,OAAO,KAAKC,QAAZ,MAA0B,cAA1B;AAEA,IAAMC,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,IAAI,EAAE,CADG;AAETC,IAAAA,UAAU,EAAE,QAFH;AAGTC,IAAAA,cAAc,EAAE;AAHP;AADoB,CAAlB,CAAf;AAQA,eAAe,SAASC,WAAT,GAAoC;AACjD,WAASC,QAAT,CAAkBC,UAAlB,EAA8B;AAC5BC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCF,UAApC;AAEA,QAAIG,WAAW,GAAGb,QAAQ,CAACc,IAAT,GAAgBC,kBAAhB,CAAmC,UAACC,YAAD,EAAkB;AACrEH,MAAAA,WAAW;;AAEX,UAAI,CAACI,WAAW,CAACP,UAAD,EAAaM,YAAb,CAAhB,EAA4C;AAE1C,YAAME,UAAU,GAAGlB,QAAQ,CAACc,IAAT,CAAcK,kBAAd,CAAiCD,UAAjC,CACjBR,UAAU,CAACU,eAAX,GAA6BC,QADZ,CAAnB;AAKArB,QAAAA,QAAQ,CAACc,IAAT,GAAgBQ,oBAAhB,CAAqCJ,UAArC,EAAiDK,KAAjD,CAAuD,UAACC,KAAD,EAAW;AAEhE,cAAMC,SAAS,GAAGD,KAAK,CAACE,IAAxB;AACA,cAAMC,YAAY,GAAGH,KAAK,CAACI,OAA3B;AAHgE,cAKxDC,KALwD,GAK9CL,KAL8C,CAKxDK,KALwD;AAAA,cAOxDX,UAPwD,GAOzCM,KAPyC,CAOxDN,UAPwD;AASjE,SATD;AAUD,OAjBD,MAiBO;AACLP,QAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACD;AACF,KAvBiB,CAAlB;AAwBD;;AACD,MAAMkB,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEL/B,MAAM,CAACgC,UAAP,CAAkB;AACrCC,cAAAA,eAAe,EAAE,0EADoB;AAErCC,cAAAA,MAAM,EAAE,CAAC,SAAD,EAAY,OAAZ;AAF6B,aAAlB,CAFK;;AAAA;AAEpBC,YAAAA,MAFoB;;AAAA,kBAOtBA,MAAM,CAACC,IAAP,KAAgB,SAPM;AAAA;AAAA;AAAA;;AAAA,6CAQjBD,MAAM,CAACE,WARU;;AAAA;AAAA,6CAUnB;AAAEC,cAAAA,SAAS,EAAE;AAAb,aAVmB;;AAAA;AAAA;AAAA;AAY1B1B,YAAAA,OAAO,CAACC,GAAR;AACAD,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AAb0B,6CAcnB;AAAEY,cAAAA,KAAK,EAAE;AAAT,aAdmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA9B;;AAiBA,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEvB,MAAM,CAACG,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,qBAAd;AAAoC,IAAA,OAAO,EAAE;AAAA,aAAM0B,qBAAqB,EAA3B;AAAA,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, View, Button } from 'react-native';\nimport * as Google from 'expo-google-app-auth';\nimport * as firebase from 'firebase/app';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n\nexport default function LoginScreen(): JSX.Element {\n  function onSignIn(googleUser) {\n    console.log('Google Auth Response', googleUser);\n    // We need to register an Observer on Firebase Auth to make sure auth is initialized.\n    var unsubscribe = firebase.auth().onAuthStateChanged((firebaseUser) => {\n      unsubscribe();\n      // Check if we are already signed-in Firebase with the correct user.\n      if (!isUserEqual(googleUser, firebaseUser)) {\n        // Build Firebase credential with the Google ID token.\n        const credential = firebase.auth.GoogleAuthProvider.credential(\n          googleUser.getAuthResponse().id_token,\n        );\n\n        // Sign in with credential from the Google user.\n        firebase.auth().signInWithCredential(credential).catch((error) => {\n          // Handle Errors here.\n          const errorCode = error.code;\n          const errorMessage = error.message;\n          // The email of the user's account used.\n          const { email } = error;\n          // The firebase.auth.AuthCredential type that was used.\n          const { credential } = error;\n          // ...\n        });\n      } else {\n        console.log('User already signed-in Firebase.');\n      }\n    });\n  }\n  const signInWithGoogleAsync = async () => {\n    try {\n      const result = await Google.logInAsync({\n        androidClientId: '489999849555-5do62o44r40gggb0opk8gb2ltrtmtbm9.apps.googleusercontent.com',\n        scopes: ['profile', 'email'],\n      });\n\n      if (result.type === 'success') {\n        return result.accessToken;\n      }\n      return { cancelled: true };\n    } catch (e) {\n      console.log(e);\n      console.log('entro2');\n      return { error: true };\n    }\n  };\n  return (\n    <View style={styles.container}>\n      <Button title=\"Sign in with Google\" onPress={() => signInWithGoogleAsync()} />\n    </View>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}